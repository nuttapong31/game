<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Quiz Game</title>
  <style>
    :root{
      --bg:#FFF7F0; --card:#FFFFFF; --accent:#FF6B6B; --accent-2:#4ECDC4; --muted:#6B7280;
      --success:#16A34A; --danger:#DC2626; --shadow: 0 6px 18px rgba(16,24,40,0.08);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; padding:24px; background:linear-gradient(180deg,var(--bg),#FFF); display:flex; align-items:center; justify-content:center;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .wrap{width:100%;max-width:820px}
    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    .logo{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:20px;box-shadow:var(--shadow)}
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:14px}

    .card{background:var(--card);border-radius:16px;padding:20px;box-shadow:var(--shadow)}
    .question-count{font-size:13px;color:var(--muted);margin-bottom:6px}
    .question{text-align:left;font-size:18px;margin:6px 0 18px}

    .options{display:grid;grid-template-columns:1fr;gap:12px}
    .option{border-radius:12px;padding:12px 14px;border:1px solid rgba(0,0,0,0.06);cursor:pointer;user-select:none}
    .option input{display:none}
    .option .label{display:flex;align-items:center;gap:12px}
    .option .dot{min-width:34px;min-height:34px;border-radius:10px;background:linear-gradient(180deg,#fff,#fff);display:flex;align-items:center;justify-content:center;font-weight:700}
    .option.selected{background:linear-gradient(90deg,#FEF3F2,#FFF7F0);border-color:rgba(255,107,107,0.2)}

    .controls{Display:flex;gap:8px;align-items:center;justify-content:space-between;margin-top:18px}
    .btn{padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
    .btn-primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;box-shadow:0 6px 20px rgba(78,204,196,0.12)}
    .btn-ghost{background:transparent;border:1px solid rgba(16,24,40,0.06)}
    .progress{height:10px;background:#F3F4F6;border-radius:999px;overflow:hidden;flex:1;margin-left:12px}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));width:0%}

    .result{display:none;flex-direction:column;align-items:center;gap:10px;padding:30px}
    .score{font-size:42px;font-weight:800}
    .emoji{font-size:36px}

    footer{margin-top:12px;text-align:center;color:var(--muted);font-size:13px}

    /* small screens */
    @media (max-width:480px){body{padding:16px} .question{font-size:16px} .logo{width:56px;height:56px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">AI</div>
      <div>
        <h1>‡πÄ‡∏Å‡∏°‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê‡πå</h1>
        <p class="lead">5 ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‚Äî ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì! ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</p>
      </div>
    </header>

    <main class="card" id="game">
      <div id="quiz-area">
        <div class="question-count" id="qcount">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° 1 ‡∏à‡∏≤‡∏Å 5</div>
        <div class="question" id="questionText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
        <div class="options" id="options"></div>

        <div class="controls">
          <button class="btn btn-ghost" id="skipBtn">‡∏Ç‡πâ‡∏≤‡∏°</button>
          <div style="display:flex;align-items:center;flex:1">
            <div class="progress" aria-hidden="true"><i id="progressBar"></i></div>
            <button class="btn btn-primary" id="nextBtn">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô / ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
          </div>
        </div>
      </div>

      <div id="result" class="result" role="status" aria-live="polite">
        <div class="emoji" id="resultEmoji">üéâ</div>
        <div class="score" id="finalScore">0 / 5</div>
        <div id="resultText" style="color:var(--muted)"></div>
        <div style="display:flex;gap:8px;margin-top:10px">
          <button class="btn btn-primary" id="retryBtn">‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
          <button class="btn btn-ghost" id="reviewBtn">‡∏î‡∏π‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
        </div>
      </div>
    </main>

    <footer>‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå ‚Äî ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î</footer>
  </div>

  <script>
    // Questions (5) - Thai language
    const questions = [
      {
        q: '‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê‡πå (AI) ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏≠‡∏∞‡πÑ‡∏£?',
        options: ['‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ','‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≤‡∏á‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏Ç‡∏≠‡∏á‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå','‡∏Æ‡∏≤‡∏£‡πå‡∏î‡πÅ‡∏ß‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï','‡∏†‡∏≤‡∏©‡∏≤‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå'],
        a: 1
      },
      {
        q: 'Machine Learning (‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á) ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≤‡∏Ç‡∏≤‡∏Ç‡∏≠‡∏á AI ‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡πâ‡∏ô‡∏≠‡∏∞‡πÑ‡∏£?',
        options: ['‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ß‡∏á‡∏à‡∏£‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå','‡πÉ‡∏´‡πâ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•','‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏≠‡∏õ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠','‡∏ß‡∏≤‡∏î‡∏†‡∏≤‡∏û‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠'],
        a: 1
      },
      {
        q: '‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê‡πå" ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏î‡πâ‡∏≤‡∏ô‡πÉ‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏±‡∏á‡∏Ñ‡∏°?',
        options: ['‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡πÅ‡∏ó‡∏ô‡∏á‡∏≤‡∏ô‡∏ö‡∏≤‡∏á‡∏≠‡∏≤‡∏ä‡∏µ‡∏û','‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏•‡∏±‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÅ‡∏Å‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ','‡∏Å‡∏≤‡∏£‡∏ó‡∏¥‡πâ‡∏á‡∏Ç‡∏¢‡∏∞‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏™‡∏°‡∏≠','‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡πÉ‡∏î‡πÜ'],
        a: 0
      },
      {
        q: '‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏†‡∏≤‡∏©‡∏≤ (‡πÄ‡∏ä‡πà‡∏ô ChatGPT) ‡∏ñ‡∏π‡∏Å‡∏ù‡∏∂‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏î?',
        options: ['‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ß‡∏±‡∏î‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô','‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å‡∏à‡∏≤‡∏Å‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ‡πÅ‡∏•‡∏∞‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°','‡∏†‡∏≤‡∏û‡∏ñ‡πà‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ï‡πà‡∏≥‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô','‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô'],
        a: 1
      },
      {
        q: '‡∏≠‡∏∞‡πÑ‡∏£‡∏Ñ‡∏∑‡∏≠‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö AI ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢?',
        options: ['‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö','‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏á‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÉ‡∏Ñ‡∏£‡∏£‡∏π‡πâ','‡∏•‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢','‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô'],
        a: 0
      }
    ];

    // State
    let idx = 0; let score = 0; let selected = null; const total = questions.length;

    // Elements
    const qcount = document.getElementById('qcount');
    const qtext = document.getElementById('questionText');
    const optionsEl = document.getElementById('options');
    const nextBtn = document.getElementById('nextBtn');
    const skipBtn = document.getElementById('skipBtn');
    const progressBar = document.getElementById('progressBar');
    const result = document.getElementById('result');
    const quizArea = document.getElementById('quiz-area');
    const finalScore = document.getElementById('finalScore');
    const resultText = document.getElementById('resultText');
    const resultEmoji = document.getElementById('resultEmoji');
    const retryBtn = document.getElementById('retryBtn');
    const reviewBtn = document.getElementById('reviewBtn');

    // --- Audio using Web Audio API (no external files) ---
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playTone(freq, duration=0.12, type='sine'){
      const now = audioCtx.currentTime; const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
      o.type = type; o.frequency.setValueAtTime(freq, now);
      g.gain.setValueAtTime(0, now); g.gain.linearRampToValueAtTime(0.12, now+0.01);
      g.gain.exponentialRampToValueAtTime(0.001, now+duration);
      o.connect(g); g.connect(audioCtx.destination); o.start(now); o.stop(now+duration+0.02);
    }
    function playCorrect(){ playTone(880,0.12,'sine'); playTone(1320,0.08,'sine'); }
    function playWrong(){ playTone(220,0.18,'triangle'); }

    // Accessibility: allow keyboard navigation
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter') nextBtn.click();
      if(e.key === 'ArrowRight') nextQuestion();
    });

    function renderQuestion(){
      selected = null; optionsEl.innerHTML='';
      const item = questions[idx];
      qcount.textContent = `‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ${idx+1} ‡∏à‡∏≤‡∏Å ${total}`;
      qtext.textContent = item.q;
      // create option elements
      item.options.forEach((opt,i)=>{
        const div = document.createElement('label'); div.className='option'; div.tabIndex=0;
        div.innerHTML = `
          <div class=label>
            <div class="dot">${String.fromCharCode(65+i)}</div>
            <div style="flex:1">${opt}</div>
          </div>`;
        div.addEventListener('click',()=> selectOption(div,i));
        div.addEventListener('keydown', (ev)=>{ if(ev.key==='Enter' || ev.key===' ') { ev.preventDefault(); selectOption(div,i);} });
        optionsEl.appendChild(div);
      });

      // update progress
      updateProgress();
    }

    function selectOption(el,i){
      // clear previous
      const children = optionsEl.querySelectorAll('.option');
      children.forEach(c=>c.classList.remove('selected'));
      el.classList.add('selected'); selected = i;
    }

    function updateProgress(){
      const pct = Math.round(((idx)/total)*100);
      progressBar.style.width = pct + '%';
    }

    nextBtn.addEventListener('click', ()=>{
      submitAnswer();
    });

    skipBtn.addEventListener('click', ()=>{
      nextQuestion();
    });

    function submitAnswer(){
      const correctIndex = questions[idx].a;
      if(selected === null){
        // if nothing selected, treat as wrong but let user know
        flashMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô (‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡∏Ç‡πâ‡∏≤‡∏°)', false);
        playWrong();
        return;
      }
      // evaluate
      const isCorrect = (selected === correctIndex);
      if(isCorrect){ score++; playCorrect(); }
      else { playWrong(); }

      // visual feedback: mark correct/wrong
      const opts = optionsEl.querySelectorAll('.option');
      opts.forEach((o,ii)=>{
        if(ii === correctIndex){ o.style.borderColor = 'rgba(22,163,74,0.12)'; o.style.boxShadow = '0 6px 18px rgba(16,185,129,0.06)'; }
        if(ii === selected && ii !== correctIndex){ o.style.opacity = 0.6; }
      });

      // short delay so user sees feedback, then next
      setTimeout(()=> nextQuestion(), 700);
    }

    function nextQuestion(){
      idx++;
      if(idx >= total){ finish(); return; }
      // reset styles
      renderQuestion();
    }

    function finish(){
      quizArea.style.display='none'; result.style.display='flex';
      finalScore.textContent = `${score} / ${total}`;
      // message
      let text=''; let emoji='';
      const pct = Math.round(score/total*100);
      if(pct === 100){ text='‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö! ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á AI ‡∏î‡∏µ‡∏°‡∏≤‡∏Å üéØ'; emoji='üèÜ'; }
      else if(pct >= 80){ text='‡∏î‡∏µ‡∏°‡∏≤‡∏Å! ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á AI üëç'; emoji='üéâ'; }
      else if(pct >= 50){ text='‡∏î‡∏µ ‡∏•‡∏≠‡∏á‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏•‡∏∂‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô üòä'; emoji='üôÇ'; }
      else{ text='‡∏≠‡∏¢‡πà‡∏≤‡∏ó‡πâ‡∏≠‚Äî‡∏•‡∏≠‡∏á‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞ üìò'; emoji='üí™'; }
      resultText.textContent = text; resultEmoji.textContent = emoji;

      // subtle confetti (simple) ‚Äî create colored dots briefly
      confettiBrief();

      // reset progress to full
      progressBar.style.width = '100%';
    }

    retryBtn.addEventListener('click', ()=>{
      idx = 0; score = 0; quizArea.style.display='block'; result.style.display='none'; renderQuestion();
    });

    reviewBtn.addEventListener('click', ()=>{
      // show all questions with correct answers
      const list = questions.map((qq,i)=>`${i+1}. ${qq.q}\n- ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: ${qq.options[qq.a]}`).join('\n\n');
      alert('‡πÄ‡∏â‡∏•‡∏¢:\n\n'+list);
    });

    function flashMessage(msg, ok=true){
      // small native toast-like message
      const t = document.createElement('div');
      t.textContent = msg; t.style.position='fixed'; t.style.left='50%'; t.style.transform='translateX(-50%)';
      t.style.bottom='28px'; t.style.padding='10px 14px'; t.style.borderRadius='10px'; t.style.boxShadow='var(--shadow)';
      t.style.background = ok ? 'rgba(22,163,74,0.08)' : 'rgba(220,38,38,0.06)'; t.style.color='var(--muted)';
      document.body.appendChild(t);
      setTimeout(()=> t.style.opacity='0',1400); setTimeout(()=> t.remove(),1800);
    }

    function confettiBrief(){
      // create small colored circles that animate up and fade
      const colors = ['#FF6B6B','#4ECDC4','#FFD93D','#8E44AD'];
      const container = document.createElement('div'); container.style.position='fixed'; container.style.left=0; container.style.top=0; container.style.width='100%'; container.style.height='100%'; container.style.pointerEvents='none';
      document.body.appendChild(container);
      for(let i=0;i<18;i++){
        const d = document.createElement('div'); d.style.position='absolute'; d.style.left=(20+Math.random()*60)+'%'; d.style.bottom='10%'; d.style.width='10px'; d.style.height='10px'; d.style.borderRadius='50%'; d.style.background=colors[i%colors.length]; d.style.opacity='0.95';
        container.appendChild(d);
        const dx = (Math.random()-0.5)*200; const dy = 300 + Math.random()*200;
        d.animate([{transform:'translateY(0px) scale(1)',opacity:1},{transform:`translate(${dx}px,-${dy}px) scale(0.6)`,opacity:0}],{duration:1200+Math.random()*400,easing:'cubic-bezier(.2,.8,.2,1)'});
      }
      setTimeout(()=> container.remove(),1600);
    }

    // initialize
    renderQuestion();

    // Make sure audio context is resumed on touch (mobile browsers require gesture)
    ['touchstart','click'].forEach(ev=>document.addEventListener(ev, ()=>{
      if(audioCtx.state === 'suspended') audioCtx.resume();
    }, {once:true}));
  </script>
</body>
</html>
